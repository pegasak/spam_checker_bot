# Telegram Spam Checker Bot

Бот на базе `aiogram`, предназначенный для автоматической проверки Telegram-аккаунтов на **спамблок** через `@SpamBot`.

## Что делает бот

1. Принимает `.rar` архив с аккаунтами (`.json` + `.session` файлы).
2. Распаковывает и анализирует содержимое.
3. Если `.session` устарела — бот запрашивает переавторизацию:
   - Отправляет код на номер телефона.
   - Ожидает, что пользователь введёт этот код в чат бота (`/code 12345`).
4. Авторизуется и проверяет аккаунт на наличие спамблока через `@SpamBot`.
5. Возвращает статистику:
   - Сколько аккаунтов заблокировано.
   - Сколько чистых.
   - Сколько сессий вызвали ошибки.

## Структура архива

Архив должен содержать пары файлов:

- `79123456789.json` — параметры аккаунта (API ID, proxy, пароль 2FA и т. д.)
- `79123456789.session` — файл Telegram-сессии (если есть)

> Пример:  
> `input/1 сб.rar` → содержит аккаунты со спамблоком  
> `input/1 без сб.rar` → содержит аккаунты без блокировок

## Как использовать

1. Запусти бота:
   ```bash
   python main.py
   ```

2. Отправь `.rar` архив с аккаунтами боту в Telegram.

3. Если сессия устарела — бот пришлёт сообщение с просьбой ввести код:
   ```
   Код отправлен на номер +79123456789.
   Введите его командой: /code 12345
   ```

4. После завершения всех авторизаций бот пришлёт:
   - Общую статистику (заблокировано / чисто / ошибки)

## Требования

- Python 3.10+
- [Telethon](https://github.com/LonamiWebs/Telethon)
- [aiogram](https://github.com/aiogram/aiogram)
- [patool](https://github.com/wummel/patool) + WinRAR (для работы с `.rar`)
- Прокси-серверы (опционально, но желательно)
- API ID и API Hash с [https://my.telegram.org/apps](https://my.telegram.org/apps)

## Установка зависимостей

```bash
pip install -r requirements.txt
```

> **Важно:** убедись, что `WinRAR` установлен и доступен в `PATH`, иначе `patool` не сможет разархивировать `.rar`.

## Безопасность

- Все входы в аккаунты производятся с использованием:
  - Proxy (если указан в JSON)
  - 2FA пароля (если указан в JSON)
  - API ID и Hash (одно приложение может обслуживать все аккаунты)
- Пароли, номера и токены нигде не сохраняются в открытом виде.

## Пример JSON-файла аккаунта

```json
{
  "app_id": 2040,
  "app_hash": "b18441a1ff607e10a989891a5462e627",
  "phone": "79124513947",
  "twoFA": "heroo",
  "proxy": [2, "pool.infatica.io", 10000, true, "user", "pass"]
}
```